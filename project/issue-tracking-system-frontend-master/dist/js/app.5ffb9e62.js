(function(t){function e(e){for(var a,i,o=e[0],l=e[1],u=e[2],c=0,p=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],a=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},r={app:0},n=[];function i(t){return o.p+"js/"+({about:"about"}[t]||t)+"."+{about:"d29f10bc"}[t]+".js"}function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.e=function(t){var e=[],s=r[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,a){s=r[t]=[e,a]}));e.push(s[2]=a);var n,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=i(t);var u=new Error;n=function(e){l.onerror=l.onload=null,clearTimeout(c);var s=r[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",u.name="ChunkLoadError",u.type=a,u.request=n,s[1](u)}r[t]=void 0}};var c=setTimeout((function(){n({type:"timeout",target:l})}),12e4);l.onerror=l.onload=n,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=u;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var a=s("85ec"),r=s.n(a);r.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],i=(s("034f"),s("2877")),o={},l=Object(i["a"])(o,r,n,!1,null,null,null),u=l.exports,c=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("NavBar"),s("div",[t._v(" "+t._s(t.getkindTable)+" "+t._s(t.getserverityTable)+" "+t._s(t.getuserTable)+" ")]),s("b-container",{staticClass:"mt-3 bv-example-row bv-example-row-flex-cols",attrs:{fluid:""}},[s("b-row",[s("b-col",{attrs:{cols:"1"}},[s("h3",[t._v("Dashboard")])]),s("b-col")],1),s("b-row",{staticClass:"mt-3"},[s("b-col"),s("b-col",{attrs:{cols:"5"}},[s("b-alert",{attrs:{show:"",variant:"info"}},[t._v("我負責的Issue")]),s("b-table",{attrs:{"sticky-header":"","head-variant":"light",hover:"",items:t.IssueItems,fields:t.IssueFields}})],1),s("b-col"),s("b-col",{attrs:{cols:"5"}},[s("b-alert",{attrs:{show:"",variant:"info"}},[t._v("Issue類別")]),s("b-table",{attrs:{"head-variant":"light",hover:"",items:t.KindItems[1],fields:t.KindFields}})],1),s("b-col")],1),s("b-row",{staticClass:"mt-3"},[s("b-col"),s("b-col",{attrs:{cols:"5"}},[s("b-alert",{attrs:{show:"",variant:"info"}},[t._v("重要性與緊急性")]),s("b-table",{attrs:{"head-variant":"light",hover:"",items:t.ServerityItems[1],fields:t.ServerityFields}})],1),s("b-col"),s("b-col",{attrs:{cols:"5"}},[s("b-alert",{attrs:{show:"",variant:"info"}},[t._v("其餘人員負責")]),s("b-table",{attrs:{"sticky-header":"","head-variant":"light",hover:"",items:t.UserItems[1],fields:t.UserFields}})],1),s("b-col")],1)],1)],1)},p=[],m=(s("ac6a"),s("d000")),h={name:"home",components:{NavBar:m["a"]},data:function(){return{issues:[],users:[],IssueFields:[{key:"number",sortable:!0},{key:"status",sortable:!0},{key:"summary",sortable:!1}],KindFields:[{key:"kind",sortable:!0},{key:"quantity",sortable:!0},{key:"percentage",sortable:!0}],ServerityFields:[{key:"urgency",sortable:!0},{key:"unknown",ortable:!0},{key:"trivial",sortable:!0},{key:"minor",sortable:!0},{key:"critical",sortable:!0},{key:"major",sortable:!0}],UserFields:[{key:"assignee",sortable:!0},{key:"backlog",sortable:!0},{key:"open",sortable:!0},{key:"inProgess",sortable:!0},{key:"reopened",sortable:!0},{key:"resolved",sortable:!0},{key:"pending",sortable:!0}],IssueItems:[],KindItems:[],ServerityItems:[],UserItems:[],statusPresent:{1:"未分配的問題",2:"已分配未開始的問題",3:"正在做的問題",4:"完成後被重新打開的問題",5:"已完成的問題",6:"待定的問題"},kindQuantity:[0,0,0,0,0],kindPercentage:["","","","",""],urgentQuantity:[0,0,0,0,0,0],asFastAsPossibleQuantity:[0,0,0,0,0,0],normalQuantity:[0,0,0,0,0,0],notUrgentQuantity:[0,0,0,0,0,0],totalQuantity:[0,0,0,0,0,0]}},computed:{getkindTable:function(){var t=this;console.log("runKindTable"),this.issues.forEach((function(e){1==e.kind?t.kindQuantity[1]=t.kindQuantity[1]+1:2==e.kind?t.kindQuantity[2]+=1:3==e.kind?t.kindQuantity[3]+=1:4==e.kind?t.kindQuantity[4]+=1:t.kindQuantity[0]+=1}));var e=this.kindQuantity[1]+this.kindQuantity[2]+this.kindQuantity[3]+this.kindQuantity[4];return this.kindPercentage[1]=(this.kindQuantity[1]/e*100).toFixed(1)+"%",this.kindPercentage[2]=(this.kindQuantity[2]/e*100).toFixed(1)+"%",this.kindPercentage[3]=(this.kindQuantity[3]/e*100).toFixed(1)+"%",this.kindPercentage[4]=(this.kindQuantity[4]/e*100).toFixed(1)+"%",this.KindItems.push([{kind:"疑難排解",quantity:this.kindQuantity[1],percentage:this.kindPercentage[1]},{kind:"功能開發",quantity:this.kindQuantity[2],percentage:this.kindPercentage[2]},{kind:"平面設計",quantity:this.kindQuantity[3],percentage:this.kindPercentage[3]},{kind:"其他",quantity:this.kindQuantity[4],percentage:this.kindPercentage[4]}]),""},getserverityTable:function(){var t=this;return console.log("runServerityTable"),this.issues.forEach((function(e){1==e.urgency?1==e.serverity?(t.urgentQuantity[1]+=1,t.totalQuantity[1]+=1):2==e.serverity?(t.urgentQuantity[2]+=1,t.totalQuantity[2]+=1):3==e.serverity?(t.urgentQuantity[3]+=1,t.totalQuantity[3]+=1):4==e.serverity?(t.urgentQuantity[4]+=1,t.totalQuantity[4]+=1):5==e.serverity&&(t.urgentQuantity[5]+=1,t.totalQuantity[5]+=1):2==e.urgency?1==e.serverity?(t.asFastAsPossibleQuantity[1]+=1,t.totalQuantity[1]+=1):2==e.serverity?(t.asFastAsPossibleQuantity[2]+=1,t.totalQuantity[2]+=1):3==e.serverity?(t.asFastAsPossibleQuantity[3]+=1,t.totalQuantity[3]+=1):4==e.serverity?(t.asFastAsPossibleQuantity[4]+=1,t.totalQuantity[4]+=1):5==e.serverity&&(t.asFastAsPossibleQuantity[5]+=1,t.totalQuantity[5]+=1):3==e.urgency?1==e.serverity?(t.normalQuantity[1]+=1,t.totalQuantity[1]+=1):2==e.serverity?(t.normalQuantity[2]+=1,t.totalQuantity[2]+=1):3==e.serverity?(t.normalQuantity[3]+=1,t.totalQuantity[3]+=1):4==e.serverity?(t.normalQuantity[4]+=1,t.totalQuantity[4]+=1):5==e.serverity&&(t.normalQuantity[5]+=1,t.totalQuantity[5]+=1):4==e.urgency&&(1==e.serverity?(t.notUrgentQuantity[1]+=1,t.totalQuantity[1]+=1):2==e.serverity?(t.notUrgentQuantity[2]+=1,t.totalQuantity[2]+=1):3==e.serverity?(t.notUrgentQuantity[3]+=1,t.totalQuantity[3]+=1):4==e.serverity?(t.notUrgentQuantity[4]+=1,t.totalQuantity[4]+=1):5==e.serverity&&(t.notUrgentQuantity[5]+=1,t.totalQuantity[5]+=1))})),this.ServerityItems.push([{urgency:"緊急",unknown:this.urgentQuantity[1],trivial:this.urgentQuantity[2],minor:this.urgentQuantity[3],critical:this.urgentQuantity[4],major:this.urgentQuantity[5]},{urgency:"盡速",unknown:this.asFastAsPossibleQuantity[1],trivial:this.asFastAsPossibleQuantity[1],minor:this.asFastAsPossibleQuantity[4],critical:this.asFastAsPossibleQuantity[4],major:this.asFastAsPossibleQuantity[5]},{urgency:"普通",unknown:this.normalQuantity[1],trivial:this.normalQuantity[2],minor:this.normalQuantity[3],critical:this.normalQuantity[4],major:this.normalQuantity[5]},{urgency:"不急",unknown:this.notUrgentQuantity[1],trivial:this.notUrgentQuantity[1],minor:this.notUrgentQuantity[3],critical:this.notUrgentQuantity[3],major:this.notUrgentQuantity[5]},{urgency:"Total",unknown:this.totalQuantity[1],trivial:this.totalQuantity[2],minor:this.totalQuantity[3],critical:this.totalQuantity[4],major:this.totalQuantity[5]}]),""},getuserTable:function(){var t=this;console.log("runUserTable");var e=[0,0,0,0,0,0,0],s={},a={},r=[];this.users.forEach((function(n){t.issues.forEach((function(t){t.assignee==n.value&&(1==t.status?e[1]+=1:2==t.status?e[2]+=1:3==t.status?e[3]+=1:4==t.status?e[4]+=1:5==t.status?e[5]+=1:6==t.status&&(e[6]+=1))})),s={assignee:n.text,backlog:e[1],open:e[2],inProgess:e[3],reopened:e[4],resolved:e[5],pending:e[6]},a=Object.assign({},s),r.push(a),s={},e=e=[0,0,0,0,0,0,0]})),this.UserItems.push(r)}},methods:{getIssueList:function(){var t="http://lspssapple.asuscomm.com:81/api/issue",e=this,s=localStorage.getItem("token"),a=localStorage.getItem("userId");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&(t.data.forEach((function(t){return e.issues.push({number:t.number,assignee:t.assigneeId,status:t.statusId,summary:t.summary,serverity:t.serverityId,urgency:t.urgencyId,kind:t.kindId})})),t.data.forEach((function(t,s,r){t.assigneeId==a&&(e.IssueItems.push({number:t.number,status:t.statusId,summary:t.summary}),e.IssueItems[e.IssueItems.length-1].status=e.statusPresent[e.IssueItems[e.IssueItems.length-1].status])})))}))},getAllUser:function(){var t="http://lspssapple.asuscomm.com:81/api/user",e=this,s=localStorage.getItem("token");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){return e.users.push({value:t.id,text:t.account})}))}))}},created:function(){this.getIssueList(),this.getAllUser()}},f=h,b=Object(i["a"])(f,d,p,!1,null,null,null),v=b.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("b-container",{staticClass:"mt-3",attrs:{fluid:""}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[s("h1",[t._v("專案管理")])]),s("b-col",{staticClass:"my-1",attrs:{lg:"8"}})],1),s("b-card",[s("b-row",{staticClass:"mb-4"},[s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:t.sortOptions},scopedSlots:t._u([{key:"first",fn:function(){return[s("option",{attrs:{value:""}},[t._v("-- none --")])]},proxy:!0}]),model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}}),s("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!t.sortBy},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[s("option",{domProps:{value:!1}},[t._v("Asc")]),s("option",{domProps:{value:!0}},[t._v("Desc")])])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Initial sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"initialSortSelect"}},[s("b-form-select",{attrs:{id:"initialSortSelect",size:"sm",options:["asc","desc","last"]},model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On","label-cols-sm":"3","label-align-sm":"right","label-size":"sm",description:"Leave all unchecked to filter on all data"}},[s("b-form-checkbox-group",{staticClass:"mt-1",model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[s("b-form-checkbox",{attrs:{value:"name"}},[t._v("專案名稱")]),s("b-form-checkbox",{attrs:{value:"id"}},[t._v("專案序號")]),s("b-form-checkbox",{attrs:{value:"manager"}},[t._v("管理者")]),s("b-form-checkbox",{attrs:{value:"developers"}},[t._v("開發成員")])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[s("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),s("b-col",{staticClass:"my-2",attrs:{lg:"6"}},[s("b-button",{staticClass:"float-left",attrs:{block:"",pill:"",variant:"outline-danger",size:"lg"},on:{click:t.openAddModal}},[t._v("新增專案")])],1)],1),s("b-table",{attrs:{"show-empty":"",striped:"",small:"",stacked:"md",items:t.projects,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(developers)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:function(s){return t.showDevelopers(e.item)}}},[t._v("詳細成員")])]}},{key:"cell(generals)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:function(s){return t.showGenerals(e.item)}}},[t._v("詳細成員")])]}},{key:"cell(issues)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:function(s){return t.showIssues(e.item)}}},[t._v("Issues")])]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"success"},on:{click:function(s){return t.setData(e.item,e.index,s.target)}}},[t._v("編輯")]),s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:e.toggleDetails}},[t._v(t._s(e.detailsShowing?"隱藏":"顯示")+"詳細")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.check-delete-modal",modifiers:{"check-delete-modal":!0}}],attrs:{size:"sm",variant:"danger"},on:{click:function(s){t.deleteItem=e.item}}},[s("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)]}},{key:"row-details",fn:function(e){return[s("b-card",[s("b-list-group",t._l(e.item,(function(e,a){return s("b-list-group-item",{key:a,staticClass:"text-left",attrs:{button:""}},[t._v(t._s(a)+": "+t._s(e))])})),1)],1)]}}])})],1)],1),s("b-modal",{attrs:{id:"addProjectModal",title:"新增專案"},on:{ok:t.createProject}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("問題名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProject.name,expression:"tempProject.name"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"",required:""},domProps:{value:t.tempProject.name},on:{input:function(e){e.target.composing||t.$set(t.tempProject,"name",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("專案描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProject.description,expression:"tempProject.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:""},domProps:{value:t.tempProject.description},on:{input:function(e){e.target.composing||t.$set(t.tempProject,"description",e.target.value)}}})])])])])]),s("b-modal",{attrs:{id:t.infoModal.id,title:"編輯","hide-footer":"",centered:""},on:{hide:t.resetInfoModal}},[s("b-form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-form-group",{attrs:{id:"project-name-group",label:"專案名稱","label-for":"project",description:"專案名稱"}},[s("b-form-input",{attrs:{id:"project",required:""},model:{value:t.newData.name,callback:function(e){t.$set(t.newData,"name",e)},expression:"newData.name"}})],1)],1),s("b-row",[s("b-col",{staticClass:"my-1"},[s("b-form-group",{attrs:{id:"developer-group",label:"開發成員","label-for":"developer",description:"編輯開發成員"}},[s("b-form-checkbox-group",{attrs:{options:t.developersOptions,stacked:""},model:{value:t.developersSelected,callback:function(e){t.developersSelected=e},expression:"developersSelected"}})],1)],1),s("b-col",{staticClass:"my-1"},[s("b-form-group",{attrs:{id:"generals-group",label:"一般使用者","label-for":"generals",description:"編輯一般使用者"}},[s("b-form-checkbox-group",{attrs:{options:t.generalsOptions,stacked:""},model:{value:t.generalsSelected,callback:function(e){t.generalsSelected=e},expression:"generalsSelected"}})],1)],1)],1),s("b-button",{staticClass:"float-right",attrs:{type:"submit",pill:"",variant:"success"}},[t._v("送出")])],1)],1)],1),s("b-modal",{attrs:{id:"check-delete-modal","hide-footer":""}},[s("b-alert",{staticClass:"text-center",attrs:{show:"",variant:"warning"}},[t._v("確定刪除？")]),s("b-button",{staticClass:"float-right",on:{click:function(e){return t.deleteProject(!1)}}},[t._v("取消")]),s("b-button",{staticClass:"float-right mr-2",attrs:{variant:"danger"},on:{click:function(e){return t.deleteProject(!0)}}},[t._v("確定")])],1),s("b-modal",{attrs:{id:"show-developers-Modal",title:"詳細成員",centered:"","ok-only":""},on:{hide:t.resetInfoModal}},[s("b-card",[s("b-list-group",t._l(t.developers,(function(e,a){return s("b-list-group-item",{key:a,attrs:{button:""}},[t._v(t._s(e.name))])})),1)],1)],1),s("b-modal",{attrs:{id:"show-generals-Modal",title:"詳細成員",centered:"","ok-only":""},on:{hide:t.resetInfoModal}},[s("b-card",[s("b-list-group",t._l(t.generals,(function(e,a){return s("b-list-group-item",{key:a,attrs:{button:""}},[t._v(t._s(e.name))])})),1)],1)],1),s("b-modal",{attrs:{id:"show-issues-Modal",title:"此專案下的 Issue",centered:"","ok-only":""},on:{hide:t.resetInfoModal}},[s("b-card",[s("b-list-group",t._l(t.issuesOfProject,(function(e,a){return s("b-list-group-item",{key:a,attrs:{button:""}},[t._v(t._s(e))])})),1)],1)],1)],1)},y=[],I=(s("96cf"),s("3b8d")),k=(s("6762"),s("7f7f"),s("bc3a")),w=s.n(k),x=(s("4be7"),{data:function(){return{tempProject:{name:"",description:"",managerId:""},newData:{name:"",id:"",userId:"",manager:"",developers:[],generals:[]},developers:[],generals:[],developersSelected:[],developersOptions:[],generalsSelected:[],generalsOptions:[],users:[],issues:[],issuesOfProject:[],projects:[],fields:[{key:"name",label:"專案名稱名稱",sortable:!0,sortDirection:"desc"},{key:"id",label:"專案序號",sortable:!0,class:"text-center"},{key:"manager",label:"管理者",sortable:!0,sortDirection:"desc",class:"text-center",formatter:function(t){return t?t["name"]:""}},{key:"developers",label:"開發成員"},{key:"generals",label:"一般使用者"},{key:"issues",label:"Issues"},{key:"actions",label:"操作"}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,15,20],sortBy:"id",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},deleteItem:null}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},components:{NavBar:m["a"]},mounted:function(){this.fetchData(),this.getAllUser(),this.getAllIssue()},methods:{setData:function(t){this.infoModal.title=t.name,this.newData.id=t.id,this.newData.name=t.name,this.newData.manager=t.manager,this.newData.developers=t.developers,this.newData.generals=t.generals,this.infoModal.content=JSON.stringify(t,null,2);var e=[],s=[],a=this;this.developersOptions=[],this.developersSelected=[],this.generalsOptions=[],this.generalsSelected=[],this.users.forEach((function(t){1==t.charactorId?(e.push(t.id),a.developersOptions.push({text:t.name,value:t.id})):(s.push(t.id),a.generalsOptions.push({text:t.name,value:t.id}))})),this.newData.developers.forEach((function(t){e.includes(t.id)&&a.developersSelected.push(t.id)})),this.newData.generals.forEach((function(t){s.includes(t.id)&&a.generalsSelected.push(t.id)})),this.$bvModal.show(this.infoModal.id)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content="",this.newData={name:"",id:"",userId:"",manager:"",developers:[],generalss:[]}},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},fetchData:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem("token"),t.next=3,w.a.get("http://lspssapple.asuscomm.com:81/api/project",{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(e)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.response;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:s=t.sent,401==s.status&&(localStorage.removeItem("token",s.data.token),localStorage.removeItem("user_id",s.data.userId),this.$router.push("/")),this.projects=s.data,this.totalRows=this.projects.length;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteProject:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$bvModal.hide("check-delete-modal"),!e){t.next=6;break}return s=localStorage.getItem("token"),t.next=5,w.a.delete("http://lspssapple.asuscomm.com:81/api/project/".concat(this.deleteItem.id),{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(s)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.fetchData(),a.deleteItem=null,t.next=4,e;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.response;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.sent;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSubmit:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={name:this.newData.name,managerId:this.newData.manager.id,developersId:this.developersSelected,generalsId:this.generalsSelected},s=localStorage.getItem("token"),t.next=4,w.a.post("http://lspssapple.asuscomm.com:81/api/project/".concat(this.newData.id),e,{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(s)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,e.response;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:a=t.sent,200==a.status?(this.fetchData(),this.$bvModal.hide(this.infoModal.id),this.makeToast("success","編輯成功！","成功")):(localStorage.removeItem("token",a.data.token),localStorage.removeItem("user_id",a.data.userId),this.$router.push("/"));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),createProject:function(){var t=this,e="http://lspssapple.asuscomm.com:81/api/project",s=this,a=localStorage.getItem("token");s.tempProject.managerId=parseInt(localStorage.getItem("user_id")),w.a.post(e,s.tempProject,{headers:{Authorization:"Bearer ".concat(a),"content-type":"application/json;charset=utf-8"}}).then((function(e){200==e.status&&(s.tempProject={name:"",description:"",managerId:""},t.makeToast("success","成功","成功新增專案!"),t.fetchData())})).catch((function(e){t.makeToast("danger","失敗","專案新增失敗!")}))},openAddModal:function(){this.$bvModal.show("addProjectModal")},showDevelopers:function(t){this.infoModal.title="詳細成員",this.developers=t.developers,this.$bvModal.show("show-developers-Modal")},showGenerals:function(t){this.infoModal.title="詳細成員",this.generals=t.generals,this.$bvModal.show("show-generals-Modal")},showIssues:function(t){this.infoModal.title="此專案下的 Issue",this.issuesOfProject=[];var e=this;this.issues.forEach((function(s){s.id==t.id&&e.issuesOfProject.push("Numbe".concat(s.number,"-").concat(s.summary))})),this.$bvModal.show("show-issues-Modal")},getAllUser:function(){var t="http://lspssapple.asuscomm.com:81/api/user",e=this,s=localStorage.getItem("token");w.a.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){return e.users.push({id:t.id,name:t.name,charactorId:t.charactorId})}))}))},getAllIssue:function(){var t="http://lspssapple.asuscomm.com:81/api/issue",e=this,s=localStorage.getItem("token");w.a.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){e.issues.push({id:t.projectId,number:t.number,summary:t.summary,createUserId:t.createUser})}))}))},makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"b-toaster-top-right";this.$bvToast.toast(e,{title:s,toaster:a,variant:t,solid:!0})},testeverything:function(){console.log(this.issues)}}}),_=x,D=Object(i["a"])(_,g,y,!1,null,null,null),C=D.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[s("b-form-group",{attrs:{id:"fieldset-userID",label:"Enter your userID","label-for":"input-userID","invalid-feedback":t.invalidUserIDFeedback,"valid-feedback":t.validFeedback,state:t.userIDState}},[s("b-form-input",{attrs:{id:"account",state:t.userIDState,type:"text",trim:"",required:""},model:{value:t.userID,callback:function(e){t.userID=e},expression:"userID"}})],1),s("b-form-group",{attrs:{id:"fieldset-password",label:"Enter your password","label-for":"input-password","invalid-feedback":t.invalidPasswordFeedback,"valid-feedback":t.validFeedback,state:t.passwordState}},[s("b-form-input",{attrs:{id:"password",state:t.passwordState,type:"password",trim:"",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("b-button",{attrs:{type:"submit",disabled:!t.btnLoginEnabled}},[t._v("Login In")]),s("b-modal",{ref:"AlertModal",attrs:{id:"Alertmodal","ok-only":"",centered:""}},[s("b-alert",{staticClass:"left",attrs:{show:"",variant:"danger"}},[t._v('"wrong account or password"')])],1)],1)],1)},j=[],P=s("bc3a").default,O={data:function(){return{userID:"",password:"",isPasswordOrUserIDError:!1}},components:{},methods:{login:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,P.post("http://lspssapple.asuscomm.com:81/api/user/token",{account:this.userID,password:this.password},{headers:{"content-type":"application/json;charset=utf-8"}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.response),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:e=t.sent,e.status>=200&&e.status<300?(localStorage.setItem("token",e.data.token),localStorage.setItem("user_id",e.data.userId),this.isPasswordOrUserIDError=!1,this.$router.push("/")):(this.isPasswordOrUserIDError=!0,this.$refs.AlertModal.show());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{btnLoginEnabled:function(){return this.userIDState&&this.passwordState&&!this.isPasswordOrUserIDError},userIDState:function(){return this.userID.length>=4&&!this.isPasswordOrUserIDError},passwordState:function(){return this.password.length>=4&&!this.isPasswordOrUserIDError},invalidUserIDFeedback:function(){return this.userID.length>=4?(this.isPasswordOrUserIDError=!1,""):this.userID.length>0?(this.isPasswordOrUserIDError=!0,"Enter at least 4 characters"):(this.isPasswordOrUserIDError=!0,"Please enter something")},invalidPasswordFeedback:function(){return this.password.length>=4?(this.isPasswordOrUserIDError=!1,""):this.password.length>0?(this.isPasswordOrUserIDError=!0,"Enter at least 4 characters"):(this.isPasswordOrUserIDError=!0,"Please enter something")},validFeedback:function(){}}},M=O,$=Object(i["a"])(M,S,j,!1,null,null,null),Q=$.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("b-form-group",{attrs:{id:"fieldset-userName",label:"Enter your Name","label-for":"input-userName","invalid-feedback":t.invalidUserNameFeedback,"valid-feedback":t.validFeedback}},[s("b-form-input",{attrs:{id:"input-userName",state:t.userNameState,type:"text",trim:"",required:""},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),s("b-form-group",{attrs:{id:"fieldset-userID",label:"Enter your userID","label-for":"input-userID","invalid-feedback":t.invalidUserIDFeedback,"valid-feedback":t.validFeedback}},[s("b-form-input",{attrs:{id:"input-userID",state:t.userIDState,type:"text",trim:"",required:""},model:{value:t.userID,callback:function(e){t.userID=e},expression:"userID"}})],1),s("b-form-group",{attrs:{id:"fieldset-password",label:"Enter your Password","label-for":"input-password","invalid-feedback":t.invalidPasswordFeedback,"valid-feedback":t.validFeedback}},[s("b-form-input",{attrs:{id:"input-password",state:t.passwordState,type:"password",trim:"",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("b-form-group",{attrs:{id:"fieldset-email",label:"Enter your Email","label-for":"input-email","invalid-feedback":t.invalidEmailFeedback,"valid-feedback":t.validFeedback,state:t.emailState}},[s("b-form-input",{attrs:{id:"input-email",state:t.emailState,type:"email",trim:"",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),s("b-button",{attrs:{type:"submit",disabled:!t.btnLoginEnabled}},[t._v("Sign up")])],1),s("b-modal",{ref:"AlertModal",attrs:{id:"Alertmodal","ok-only":"",centered:""}},[s("b-alert",{staticClass:"left",attrs:{show:"",variant:"danger"}},[t._v(t._s(t.errorMessage))])],1)],1)},T=[],A={data:function(){return{userID:"",userName:"",password:"",email:"",isPasswordOrUserNameError:!1,errorMessage:"an existing item already exists"}},components:{},methods:{register:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={account:this.userID,password:this.password,name:this.userName,email:this.email,charactorId:2},s=null,t.next=4,w.a.post("http://lspssapple.asuscomm.com:81/api/user",e,{headers:{"content-type":"application/json;charset=utf-8"}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.response);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:s=t.sent,s.status>=200&&s.status<300?(console.log(s.data),this.$emit("registerSuccess")):400==s.status?(this.errorMessage=s.data,this.isPasswordOrUserIDError=!0,this.$refs.AlertModal.show()):409==s.status&&(this.errorMessage=s.data,this.isPasswordOrUserIDError=!0,this.$refs.AlertModal.show());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},computed:{btnLoginEnabled:function(){return this.userNameState&&this.passwordState&&this.userIDState},userNameState:function(){return this.userName.length>0},passwordState:function(){return this.password.length>=4},userIDState:function(){return this.userID.length>=4},emailState:function(){return this.email.length>0},invalidUserNameFeedback:function(){return this.userName.length>0?"":"Please enter something"},invalidUserIDFeedback:function(){return this.userID.length>0?"":this.userID.length>0?"Enter at least 4 characters":"Please enter something"},invalidEmailFeedback:function(){return this.email.length>4?"":this.email.length>0?"Enter at least 4 characters":"Please enter something"},invalidPasswordFeedback:function(){return this.password.length>4?"":this.userID.length>0?"Enter at least 4 characters":"Please enter something"},validFeedback:function(){return""}}},R=A,z=Object(i["a"])(R,E,T,!1,null,null,null),B=z.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("b-modal",{attrs:{id:"modal-scoped",centered:"","hide-footer":"","no-close-on-backdrop":"","no-close-on-esc":"",title:t.titleName[t.tabIndex]}},[s("b-tabs",{attrs:{"content-class":"mt-3",lazy:""},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},[s("b-tab",{attrs:{title:"Login"}},[s("Login")],1),s("b-tab",{attrs:{title:"Register"}},[s("Register",{on:{registerSuccess:function(e){t.tabIndex=0}}})],1)],1)],1)],1)},F=[],N={name:"LoginRegisterDialog",mounted:function(){this.$bvModal.show("modal-scoped"),this.tabIndex=0},data:function(){return{titleName:["Login","Register"],tabIndex:0}},methods:{linkClass:function(t){return this.tabIndex===t?["bg-primary","text-light"]:["bg-light","text-info"]}},components:{NavBar:m["a"],Login:Q,Register:B}},q=N,L=Object(i["a"])(q,U,F,!1,null,null,null),G=L.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("div",{staticClass:"container mt-4 ml-0"},[s("div",{staticClass:"row justify-content-start"},[s("div",{staticClass:"col col-auto"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"form-control searchbar",attrs:{type:"text",placeholder:"請輸入關鍵字"},domProps:{value:t.searchText},on:{input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),s("div",{staticClass:"col col-auto ml-0"},[s("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.openAddModal()}}},[t._v("新增問題")])])])]),s("table",{staticClass:"table mt-4 table-striped"},[t._m(0),s("tbody",t._l(t.handleIssues,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.checkIssue(e)}}},[s("font-awesome-icon",{attrs:{icon:"search"}})],1)]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.number)+" ")]),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.summary)+" ")]),s("td",{staticClass:"align-middle"},[s("b-form-select",{attrs:{options:t.users,disabled:""},model:{value:e.assigneeId,callback:function(s){t.$set(e,"assigneeId",s)},expression:"item.assigneeId"}})],1),s("td",{staticClass:"align-middle"},[s("b-form-select",{attrs:{options:t.users,disabled:""},model:{value:e.reporterId,callback:function(s){t.$set(e,"reporterId",s)},expression:"item.reporterId"}})],1),s("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.statusId)+" ")]),s("td",{staticClass:"align-middle"},[s("b-form-select",{attrs:{options:t.users,disabled:""},model:{value:e.createUser,callback:function(s){t.$set(e,"createUser",s)},expression:"item.createUser"}})],1),s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){s.preventDefault(),t.tempIssue=e,t.openDeleteModal(e)}}},[s("font-awesome-icon",{attrs:{icon:"trash-alt"}})],1)])])})),0)]),s("b-modal",{attrs:{id:"addIssueModal",title:"新增問題"},on:{ok:t.createIssue}},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"title"}},[t._v("問題名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tempIssue.summary,expression:"tempIssue.summary"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"",required:""},domProps:{value:t.tempIssue.summary},on:{input:function(e){e.target.composing||t.$set(t.tempIssue,"summary",e.target.value)}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"assigneeId"}},[t._v("被指派者")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"assigneeId",options:t.users,size:"sm",required:""},model:{value:t.tempIssue.assigneeId,callback:function(e){t.$set(t.tempIssue,"assigneeId",e)},expression:"tempIssue.assigneeId"}})],1),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"reporterId"}},[t._v("回報者")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"reporterId",options:t.users,size:"sm",required:""},model:{value:t.tempIssue.reporterId,callback:function(e){t.$set(t.tempIssue,"reporterId",e)},expression:"tempIssue.reporterId"}})],1)]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"description"}},[t._v("問題描述")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempIssue.description,expression:"tempIssue.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:""},domProps:{value:t.tempIssue.description},on:{input:function(e){e.target.composing||t.$set(t.tempIssue,"description",e.target.value)}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"statusId"}},[t._v("問題狀態")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"statusId",options:t.statusOptions,size:"sm",required:""},model:{value:t.tempIssue.statusId,callback:function(e){t.$set(t.tempIssue,"statusId",e)},expression:"tempIssue.statusId"}})],1),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"kindId"}},[t._v("問題類別")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"kindId",options:t.kindOptions,size:"sm",required:""},model:{value:t.tempIssue.kindId,callback:function(e){t.$set(t.tempIssue,"kindId",e)},expression:"tempIssue.kindId"}})],1)]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"serverityId"}},[t._v("問題嚴重性")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"serverityId",options:t.serverityOptions,size:"sm",required:""},model:{value:t.tempIssue.serverityId,callback:function(e){t.$set(t.tempIssue,"serverityId",e)},expression:"tempIssue.serverityId"}})],1),s("div",{staticClass:"form-group col-md-6"},[s("label",{attrs:{for:"urgencyId"}},[t._v("問題緊急性")]),s("b-form-select",{staticClass:"mt-3",attrs:{id:"urgencyId",options:t.urgencyOptions,size:"sm",required:""},model:{value:t.tempIssue.urgencyId,callback:function(e){t.$set(t.tempIssue,"urgencyId",e)},expression:"tempIssue.urgencyId"}})],1)])])])])])],1)},J=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("th",{staticStyle:{width:"3%"},attrs:{scope:"col"}},[t._v("查看")]),s("th",{staticStyle:{width:"5%"},attrs:{scope:"col"}},[t._v("代號")]),s("th",{staticStyle:{width:"10%"},attrs:{scope:"col"}},[t._v("標題")]),s("th",{staticStyle:{width:"7%","min-width":"105px"},attrs:{scope:"col"}},[t._v("被指派者")]),s("th",{staticStyle:{width:"7%","min-width":"105px"},attrs:{scope:"col"}},[t._v("回報者")]),s("th",{staticStyle:{width:"13%"},attrs:{scope:"col"}},[t._v("狀態")]),s("th",{staticStyle:{width:"7%"},attrs:{scope:"col"}},[t._v("創立者")]),s("th",{staticStyle:{width:"3%"},attrs:{scope:"col"}},[t._v("刪除")])])}],H=(s("4917"),s("2ef0")),V=s.n(H),W={name:"IssueIndex",components:{NavBar:m["a"]},data:function(){return{searchText:"",createModal:!1,tempIssue:{number:"",summary:"",assigneeId:"",reporterId:"",statusId:"",description:"",kindId:"",serverityId:"",urgencyId:"",projectId:""},issues:[],statusOptions:[{value:1,text:"未分配的問題"},{value:2,text:"已分配未開始的問題"},{value:3,text:"正在做的問題"},{value:4,text:"完成後被重新打開的問題"},{value:5,text:"已完成的問題"},{value:6,text:"待定的問題"}],kindOptions:[{value:1,text:"疑難排解"},{value:2,text:"功能開發"},{value:3,text:"平面設計"},{value:4,text:"其他"}],serverityOptions:[{value:1,text:"未知"},{value:2,text:"不重要的"},{value:3,text:"次要的"},{value:4,text:"危急的"},{value:5,text:"重要的"}],urgencyOptions:[{value:1,text:"緊急"},{value:2,text:"盡速"},{value:3,text:"普通"},{value:4,text:"不急"}],users:[],statusPresent:{1:"未分配的問題",2:"已分配未開始的問題",3:"正在做的問題",4:"完成後被重新打開的問題",5:"已完成的問題",6:"待定的問題"}}},computed:{handleIssues:function(){var t=this;return V.a.filter(t.issues,(function(e){return e.summary.match(t.searchText)}))}},methods:{getIssueList:function(){var t="http://lspssapple.asuscomm.com:81/api/issue",e=this,s=localStorage.getItem("token"),a=localStorage.getItem("user_id");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){console.log(t),200==t.status&&t.data.forEach((function(t,s,r){t.reporterId!=a&&t.createUser!=a&&t.assigneeId!=a||(e.issues.push(t),e.issues[e.issues.length-1].statusId=e.statusPresent[e.issues[e.issues.length-1].statusId])}))}))},openAddModal:function(){this.$bvModal.show("addIssueModal")},closeAddModal:function(){this.$bvModal.hide("addIssueModal")},openDeleteModal:function(t){var e=this;this.$bvModal.msgBoxConfirm("確定刪除?",{okTitle:"刪除",cancelTitle:"取消",centered:!0}).then((function(s){if(s){var a="http://lspssapple.asuscomm.com:81/api/issue/"+t.id,r=localStorage.getItem("token");e.$http.delete(a,{headers:{Authorization:"Bearer "+r,"content-type":"application/json;charset=utf-8"}}).then((function(t){console.log(t),200==t.status&&(alert("刪除問題成功!"),e.$router.go())}))}}))},clearTempIssue:function(){var t={number:"",summary:"",assigneeId:"",reporterId:"",statusId:"",description:"",kindId:"",serverityId:"",urgencyId:"",projectId:""};this.tempIssue=t},createIssue:function(){var t=this,e="http://lspssapple.asuscomm.com:81/api/issue",s=this,a=localStorage.getItem("token");s.tempIssue.createUser=parseInt(localStorage.getItem("user_id")),s.tempIssue.number=Math.floor(1e5+9e5*Math.random()),this.$http.post(e,s.tempIssue,{headers:{Authorization:"Bearer "+a,"content-type":"application/json;charset=utf-8"}}).then((function(e){console.log(e),200==e.status&&(alert("新增問題成功!"),t.$router.go())}))},checkIssue:function(t){var e=this;e.$router.push({path:"/issue/".concat(t.id)})},getAllUser:function(){var t="http://lspssapple.asuscomm.com:81/api/user",e=this,s=localStorage.getItem("token");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){return e.users.push({value:t.id,text:t.name})}))}))},handleUser:function(t){this.users.forEach((function(e,s,a){if(e.value==t)return console.log(e.text),e.text}))}},created:function(){this.getIssueList(),this.getAllUser()}},X=W,Y=Object(i["a"])(X,K,J,!1,null,null,null),Z=Y.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("div"),s("b-container",{staticClass:"pl-5 pr-5 mt-3",attrs:{fluid:""}},[s("b-form",[s("b-form-group",{attrs:{id:"input-group-issue"}},[s("b-row",{staticClass:"pb-3"},[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-number"}},[t._v("問題單號")]),s("b-form-input",{attrs:{id:"input-number",type:"string",required:""},model:{value:t.issue.number,callback:function(e){t.$set(t.issue,"number",e)},expression:"issue.number"}})],1),s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-summary"}},[t._v("問題標題")]),s("b-form-input",{attrs:{id:"input-summary",type:"string",required:""},model:{value:t.issue.summary,callback:function(e){t.$set(t.issue,"summary",e)},expression:"issue.summary"}})],1),s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-summary"}},[t._v("隸屬專案")]),s("b-form-select",{staticClass:"mb-3",attrs:{options:t.projectOptions,"value-field":"id","text-field":"name","disabled-field":"notEnabled"},model:{value:t.issue.projectId,callback:function(e){t.$set(t.issue,"projectId",e)},expression:"issue.projectId"}})],1),s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-IssueCreateUser"}},[t._v("創立者")]),s("b-form-select",{attrs:{id:"input-IssueCreateUser",options:t.users,disabled:""},model:{value:t.issue.createUser,callback:function(e){t.$set(t.issue,"createUser",e)},expression:"issue.createUser"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-description"}},[t._v("問題描述")]),s("b-form-textarea",{attrs:{id:"input-description"},model:{value:t.issue.description,callback:function(e){t.$set(t.issue,"description",e)},expression:"issue.description"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-assigneeId"}},[t._v("被指派者")]),s("b-form-select",{attrs:{id:"input-assigneeId",options:t.users,required:""},model:{value:t.issue.assigneeId,callback:function(e){t.$set(t.issue,"assigneeId",e)},expression:"issue.assigneeId"}})],1),s("b-col",[s("label",{attrs:{for:"input-reporterId"}},[t._v("回報者")]),s("b-form-select",{attrs:{id:"input-reporterId",options:t.users,required:""},model:{value:t.issue.reporterId,callback:function(e){t.$set(t.issue,"reporterId",e)},expression:"issue.reporterId"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-statusId"}},[t._v("狀態")]),s("b-form-select",{attrs:{id:"input-statusId",options:t.statusOptions,required:""},model:{value:t.issue.statusId,callback:function(e){t.$set(t.issue,"statusId",e)},expression:"issue.statusId"}})],1),s("b-col",[s("label",{attrs:{for:"input-kindId"}},[t._v("種類")]),s("b-form-select",{attrs:{id:"input-kindId",options:t.kindOptions,required:""},model:{value:t.issue.kindId,callback:function(e){t.$set(t.issue,"kindId",e)},expression:"issue.kindId"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-serverityId"}},[t._v("重要性")]),s("b-form-select",{attrs:{id:"input-serverityId",options:t.serverityOptions,required:""},model:{value:t.issue.serverityId,callback:function(e){t.$set(t.issue,"serverityId",e)},expression:"issue.serverityId"}})],1),s("b-col",[s("label",{attrs:{for:"input-urgencyId"}},[t._v("緊急性")]),s("b-form-select",{attrs:{id:"input-urgencyId",options:t.urgencyOptions,required:""},model:{value:t.issue.urgencyId,callback:function(e){t.$set(t.issue,"urgencyId",e)},expression:"issue.urgencyId"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-estimatedTime"}},[t._v("估計處理時間")]),s("b-form-input",{attrs:{id:"input-estimatedTime",type:"number"},model:{value:t.issue.estimatedTime,callback:function(e){t.$set(t.issue,"estimatedTime",e)},expression:"issue.estimatedTime"}})],1),s("b-col",[s("label",{attrs:{for:"input-estimatedStartTime"}},[t._v("估計開始時間")]),s("b-form-input",{attrs:{id:"input-estimatedStartTime",type:"datetime-local"},model:{value:t.issue.estimatedStartTime,callback:function(e){t.$set(t.issue,"estimatedStartTime",e)},expression:"issue.estimatedStartTime"}})],1),s("b-col",[s("label",{attrs:{for:"input-estimatedEndTime"}},[t._v("估計結束時間")]),s("b-form-input",{attrs:{id:"input-estimatedEndTime",type:"datetime-local"},model:{value:t.issue.estimatedEndTime,callback:function(e){t.$set(t.issue,"estimatedEndTime",e)},expression:"issue.estimatedEndTime"}})],1)],1),s("b-row",{staticClass:"pb-3"},[s("b-col",[s("label",{attrs:{for:"input-actualStartTime"}},[t._v("實際開始時間")]),s("b-form-input",{attrs:{id:"input-actualStartTime",type:"datetime-local"},model:{value:t.issue.actualStartTime,callback:function(e){t.$set(t.issue,"actualStartTime",e)},expression:"issue.actualStartTime"}})],1),s("b-col",[s("label",{attrs:{for:"input-actualEndTime"}},[t._v("實際結束時間")]),s("b-form-input",{attrs:{id:"input-actualEndTime",type:"datetime-local"},model:{value:t.issue.actualEndTime,callback:function(e){t.$set(t.issue,"actualEndTime",e)},expression:"issue.actualEndTime"}})],1),s("b-col",[s("label",{attrs:{for:"input-resolveTime"}},[t._v("問題解決時間")]),s("b-form-input",{attrs:{id:"input-resolveTime",type:"datetime-local"},model:{value:t.issue.resolveTime,callback:function(e){t.$set(t.issue,"resolveTime",e)},expression:"issue.resolveTime"}})],1)],1)],1)],1)],1),s("b-button",{attrs:{variant:"secondary"},on:{click:t.updateIssue}},[t._v("修改")])],1)},et=[],st={name:"IssuePage",components:{NavBar:m["a"]},data:function(){return{issue:{number:"",summary:"",description:"",assigneeId:"",reporterId:"",estimatedTime:0,estimatedStartTime:"",estimatedEndTime:"",actualStartTime:"",actualEndTime:"",resolveTime:"",kindId:"",serverityId:"",statusId:"",urgencyId:"",createTime:"",createUser:"",modifyTime:"",ModifyUser:"",projectId:""},statusOptions:[{value:1,text:"未分配的問題"},{value:2,text:"已分配未開始的問題"},{value:3,text:"正在做的問題"},{value:4,text:"完成後被重新打開的問題"},{value:5,text:"已完成的問題"},{value:6,text:"待定的問題"}],kindOptions:[{value:1,text:"疑難排解"},{value:2,text:"功能開發"},{value:3,text:"平面設計"},{value:4,text:"其他"}],serverityOptions:[{value:1,text:"未知"},{value:2,text:"不重要的"},{value:3,text:"次要的"},{value:4,text:"危急的"},{value:5,text:"重要的"}],urgencyOptions:[{value:1,text:"緊急"},{value:2,text:"盡速"},{value:3,text:"普通"},{value:4,text:"不急"}],users:[],projectOptions:[]}},methods:{getIssue:function(){var t=this,e="http://lspssapple.asuscomm.com:81/api/issue/"+t.$route.params.id,s=localStorage.getItem("token");this.$http.get(e,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(e){console.log(e),200==e.status&&(t.issue=e.data)}))},getAllProject:function(){var t="http://lspssapple.asuscomm.com:81/api/project",e=this,s=localStorage.getItem("token");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){return e.projectOptions.push({id:t.id,name:t.name})}))}))},getAllUser:function(){var t="http://lspssapple.asuscomm.com:81/api/user",e=this,s=localStorage.getItem("token");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){200==t.status&&t.data.forEach((function(t){return e.users.push({value:t.id,text:t.name})}))}))},updateIssue:function(){var t=this,e="http://lspssapple.asuscomm.com:81/api/issue/"+t.issue.id,s=localStorage.getItem("token");this.$http.post(e,t.issue,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(e){200==e.status&&(alert("修改成功"),t.$route.go())}))}},created:function(){this.getIssue(),this.getAllUser(),this.getAllProject()}},at=st,rt=Object(i["a"])(at,tt,et,!1,null,null,null),nt=rt.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("b-container",{staticClass:"my-3",attrs:{fluid:""}},[s("b-row",[s("b-col",{staticClass:"my-1",attrs:{lg:"4"}},[s("h1",[t._v("使用者管理")])]),s("b-col",{staticClass:"my-1",attrs:{lg:"8"}})],1),s("b-card",[s("b-row",{staticClass:"mb-4"},[s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"sortBySelect"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-select",{staticClass:"w-75",attrs:{id:"sortBySelect",options:t.sortOptions},scopedSlots:t._u([{key:"first",fn:function(){return[s("option",{attrs:{value:""}},[t._v("-- none --")])]},proxy:!0}]),model:{value:t.sortBy,callback:function(e){t.sortBy=e},expression:"sortBy"}}),s("b-form-select",{staticClass:"w-25",attrs:{size:"sm",disabled:!t.sortBy},model:{value:t.sortDesc,callback:function(e){t.sortDesc=e},expression:"sortDesc"}},[s("option",{domProps:{value:!1}},[t._v("Asc")]),s("option",{domProps:{value:!0}},[t._v("Desc")])])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Initial sort","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"initialSortSelect"}},[s("b-form-select",{attrs:{id:"initialSortSelect",size:"sm",options:["asc","desc","last"]},model:{value:t.sortDirection,callback:function(e){t.sortDirection=e},expression:"sortDirection"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"3","label-align-sm":"right","label-size":"sm","label-for":"filterInput"}},[s("b-input-group",{attrs:{size:"sm"}},[s("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),s("b-input-group-append",[s("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v("Clear")])],1)],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{lg:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter On","label-cols-sm":"3","label-align-sm":"right","label-size":"sm",description:"Leave all unchecked to filter on all data"}},[s("b-form-checkbox-group",{staticClass:"mt-1",model:{value:t.filterOn,callback:function(e){t.filterOn=e},expression:"filterOn"}},[s("b-form-checkbox",{attrs:{value:"name"}},[t._v("使用者名稱")]),s("b-form-checkbox",{attrs:{value:"account"}},[t._v("使用者帳號")]),s("b-form-checkbox",{attrs:{value:"eMail"}},[t._v("信箱")])],1)],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"5",md:"6"}},[s("b-form-group",{staticClass:"mb-0",attrs:{label:"Per page","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[s("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),s("b-col",{staticClass:"my-1",attrs:{sm:"7",md:"6"}},[s("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),s("b-col",{staticClass:"my-2",attrs:{lg:"6"}},[s("b-button",{staticClass:"float-left",attrs:{block:"",pill:"",variant:"outline-danger",size:"lg"},on:{click:t.openAddModal}},[t._v("新增使用者")])],1)],1),s("b-table",{attrs:{"show-empty":"",small:"",stacked:"md",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,filterIncludedFields:t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t._v(t._s(e.value))]}},{key:"cell(actions)",fn:function(e){return[s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"success"},on:{click:function(s){return t.info(e.item,e.index,s.target)}}},[t._v("編輯")]),s("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:e.toggleDetails}},[t._v(t._s(e.detailsShowing?"隱藏":"顯示")+"詳細")]),s("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.check-delete-modal",modifiers:{"check-delete-modal":!0}}],attrs:{size:"sm",variant:"danger"},on:{click:function(s){t.deleteItem=e.item}}},[t._v("刪除")])]}},{key:"row-details",fn:function(e){return[s("b-card",[s("ul",{staticClass:"text-left"},t._l(e.item,(function(e,a){return s("li",{key:a},[t._v(t._s(a)+": "+t._s(e))])})),0)])]}}])}),s("b-modal",{attrs:{id:t.infoModal.id,title:"編輯","hide-footer":"",centered:""},on:{hide:t.resetInfoModal}},[s("b-form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[s("b-form-group",{attrs:{id:"name-group",label:"使用者名稱","label-for":"name",description:"修改使用者名稱"}},[s("b-form-input",{attrs:{id:"name",required:""},model:{value:t.newData.name,callback:function(e){t.$set(t.newData,"name",e)},expression:"newData.name"}})],1),s("b-form-group",{attrs:{id:"eMail-group",label:"信箱","label-for":"eMail",description:"修改信箱"}},[s("b-form-input",{attrs:{id:"eMail",required:""},model:{value:t.newData.eMail,callback:function(e){t.$set(t.newData,"eMail",e)},expression:"newData.eMail"}})],1),s("b-form-group",{attrs:{id:"charactorId-group",label:"Charactor","label-for":"charactorId",description:"Change Charactor"}},[s("b-form-select",{staticClass:"mb-3",attrs:{options:t.CharactorOptions,"value-field":"charactorId","text-field":"name","disabled-field":"notEnabled"},model:{value:t.newData.charactorId,callback:function(e){t.$set(t.newData,"charactorId",e)},expression:"newData.charactorId"}})],1),s("b-form-group",{attrs:{id:"lineId-group",label:"lineId","label-for":"lineId",description:"修改 lineId"}},[s("b-form-input",{attrs:{id:"lineId"},model:{value:t.newData.lineId,callback:function(e){t.$set(t.newData,"lineId",e)},expression:"newData.lineId"}})],1),s("b-button",{staticClass:"float-right",attrs:{type:"submit",pill:"",variant:"success"}},[t._v("送出")])],1)],1),s("b-modal",{attrs:{id:"check-delete-modal","hide-footer":""}},[s("b-alert",{staticClass:"text-center",attrs:{show:"",variant:"warning"}},[t._v("確定刪除？")]),s("b-button",{staticClass:"float-right",on:{click:function(e){return t.deleteAccount(!1)}}},[t._v("取消")]),s("b-button",{staticClass:"float-right mr-2",attrs:{variant:"danger"},on:{click:function(e){return t.deleteAccount(!0)}}},[t._v("確定")])],1),s("b-modal",{attrs:{id:"addAccountModal",title:"新增使用者","hide-footer":""}},[s("Register",{on:{registerSuccess:t.createUser}})],1)],1)],1)],1)},ot=[],lt={data:function(){var t=this;return{newData:{name:"",account:"",password:"",eMail:"",charactorId:"",lineId:"",userId:""},CharactorSelect:1,items:[],fields:[{key:"name",label:"使用者名稱",sortable:!0,sortDirection:"desc"},{key:"account",label:"使用者帳號",sortable:!0,class:"text-center"},{key:"password",label:"使用者密碼",sortable:!0,sortDirection:"desc",class:"text-center"},{key:"charactorId",label:"使用者權限",sortable:!0,sortDirection:"desc",class:"text-center",formatter:function(e){return e?t.CharactorOptions[e].name:t.CharactorOptions[0].name}},{key:"eMail",label:"信箱",sortable:!0,sortByFormatted:!0,filterByFormatted:!0},{key:"actions",label:"操作"}],CharactorOptions:[{charactorId:0,name:"--請選則--",notEnabled:!0},{charactorId:1,name:"系統管理員"},{charactorId:2,name:"一般使用者"}],totalRows:1,currentPage:1,perPage:10,pageOptions:[10,15,20],sortBy:"account",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],infoModal:{id:"info-modal",title:"",content:""},deleteItem:null}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},components:{NavBar:m["a"],Register:B},mounted:function(){this.fetchData()},methods:{info:function(t,e,s){this.infoModal.title=t.name,this.newData.name=t.name,this.newData.charactorId=t.charactorId?t.charactorId:0,this.newData.eMail=t.eMail,this.newData.lineId=t.lineId,this.newData.account=t.account,this.newData.password=t.password,this.newData.userId=t.id,this.infoModal.content=JSON.stringify(t,null,2),this.$bvModal.show(this.infoModal.id)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content="",this.newData={name:"",account:"",password:"",eMail:"",charactorId:"",lineId:"",userId:""}},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1},fetchData:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem("token"),t.next=3,w.a.get("http://lspssapple.asuscomm.com:81/api/user",{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(e)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.response;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:s=t.sent,401==s.status&&(localStorage.removeItem("token",s.data.token),localStorage.removeItem("user_id",s.data.userId),this.$router.push("/")),this.items=s.data,this.totalRows=this.items.length;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteAccount:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$bvModal.hide("check-delete-modal"),!e){t.next=6;break}return s=localStorage.getItem("token"),t.next=5,w.a.delete("http://lspssapple.asuscomm.com:81/api/user/".concat(this.deleteItem.id),{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(s)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.fetchData(),a.deleteItem=null,a.makeToast("success","刪除成功！","成功"),t.next=5,e;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.makeToast("danger","刪除失敗...","失敗","b-toaster-bottom-full"),t.next=3,e.response;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:t.sent;case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleSubmit:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={name:this.newData.name,eMail:this.newData.eMail,charactorId:this.newData.charactorId,lineId:this.newData.lineId,password:this.newData.password},s=localStorage.getItem("token"),t.next=4,w.a.post("http://lspssapple.asuscomm.com:81/api/user/".concat(this.newData.userId),e,{headers:{"content-type":"application/json;charset=utf-8",Authorization:"Bearer ".concat(s)}}).then(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,e.response;case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:a=t.sent,200==a.status?(this.fetchData(),this.$bvModal.hide(this.infoModal.id)):(localStorage.removeItem("token",a.data.token),localStorage.removeItem("user_id",a.data.userId),this.$router.go());case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),openAddModal:function(){this.$bvModal.show("addAccountModal")},createUser:function(){this.fetchData(),this.$bvModal.hide("addAccountModal"),this.makeToast("success","成功建立帳號")},makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"b-toaster-top-right";this.$bvToast.toast(e,{title:s,toaster:a,variant:t,solid:!0})}}},ut=lt,ct=Object(i["a"])(ut,it,ot,!1,null,null,null),dt=ct.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("NavBar"),s("b-container",{staticClass:"mt-5 bv-example-row"},[s("b-card",[s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-name"}},[t._v("名稱")]),s("b-form-input",{attrs:{id:"input-name",type:"text",required:""},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1)],1),s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-account"}},[t._v("帳號")]),s("b-form-input",{attrs:{id:"input-account",type:"text",required:""},model:{value:t.user.account,callback:function(e){t.$set(t.user,"account",e)},expression:"user.account"}})],1)],1),s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-eMail"}},[t._v("信箱")]),s("b-form-input",{attrs:{id:"input-eMail",type:"email",required:""},model:{value:t.user.eMail,callback:function(e){t.$set(t.user,"eMail",e)},expression:"user.eMail"}})],1)],1),s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-charactorId"}},[t._v("身分")]),s("b-form-input",{attrs:{id:"input-charactorId",value:t.GetCharactorName,type:"text",disabled:""}})],1)],1),s("b-row",[s("b-col",{attrs:{cols:"3"}},[s("label",{attrs:{for:"input-linwId"}},[t._v("Line Id")]),s("b-form-input",{attrs:{id:"input-linwId",value:t.GetLineid,type:"text",disabled:""}})],1)],1),s("b-button",{attrs:{variant:"secondary"},on:{click:t.update}},[t._v("修改")])],1)],1)],1)},mt=[],ht={data:function(){return{user:{}}},components:{NavBar:m["a"]},methods:{GetUser:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem("user_id"),s=localStorage.getItem("token"),a="http://lspssapple.asuscomm.com:81/api/user/".concat(e),this,t.next=6,w.a.get(a,{headers:{Authorization:"Bearer ".concat(s),"content-type":"application/json;charset=utf-8"}}).then((function(t){return t})).catch((function(t){return t.response}));case 6:r=t.sent,this.user=r.data;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),update:function(){var t=this,e=this,s=localStorage.getItem("user_id"),a=localStorage.getItem("token"),r="http://lspssapple.asuscomm.com:81/api/user/".concat(s);w.a.post(r,e.user,{headers:{Authorization:"Bearer "+a,"content-type":"application/json;charset=utf-8"}}).then((function(e){200==e.status&&(alert("修改成功"),t.$router.go())}))}},computed:{GetLineid:function(){var t=this.user.lineId;return null===t?"尚未設定":t},GetCharactorName:function(){var t=[{name:"未配置"},{name:"系統管理員"},{name:"一般使用者"}];console.log(this.user.charactorId);var e=t[this.user.charactorId].name;return e}},mounted:function(){this.GetUser()}},ft=ht,bt=Object(i["a"])(ft,pt,mt,!1,null,null,null),vt=bt.exports,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"},[s("NavBar"),s("b-container",{staticClass:"bv-example-row mt-5"},[s("b-row",[s("b-col",[s("ve-pie",{attrs:{data:t.statusChartData}})],1),s("b-col",[s("ve-pie",{attrs:{data:t.kindChartData}})],1)],1),s("b-row",[s("b-col",[s("ve-pie",{attrs:{data:t.serverityChartData}})],1),s("b-col",[s("ve-pie",{attrs:{data:t.urgencyChartData}})],1)],1)],1)],1)},yt=[],It={name:"report",components:{NavBar:m["a"]},data:function(){return{issues:[],statusChartData:{columns:["status","count"],rows:[{status:"未分配的問題",count:0},{status:"已分配未開始的問題",count:0},{status:"正在做的問題",count:0},{status:"完成後被重新打開的問題",count:0},{status:"已完成的問題",count:0},{status:"待定的問題",count:0}]},kindChartData:{columns:["status","count"],rows:[{status:"疑難排解",count:0},{status:"功能開發",count:0},{status:"平面設計",count:0},{status:"其他",count:0}]},serverityChartData:{columns:["status","count"],rows:[{status:"未知",count:0},{status:"不重要的",count:0},{status:"次要的",count:0},{status:"危急的",count:0},{status:"重要的",count:0}]},urgencyChartData:{columns:["status","count"],rows:[{status:"緊急",count:0},{status:"盡速",count:0},{status:"普通",count:0},{status:"不急",count:0}]}}},methods:{getAllIssue:function(){var t="http://lspssapple.asuscomm.com:81/api/issue",e=this,s=localStorage.getItem("token");localStorage.getItem("user_id");this.$http.get(t,{headers:{Authorization:"Bearer "+s,"content-type":"application/json;charset=utf-8"}}).then((function(t){console.log(t),200==t.status&&(e.issues=t.data,t.data.forEach((function(t,s,a){e.statusChartData.rows[t.statusId-1].count+=1,e.kindChartData.rows[t.kindId-1].count+=1,e.serverityChartData.rows[t.serverityId-1].count+=1,e.urgencyChartData.rows[t.urgencyId-1].count+=1})))}))}},created:function(){this.getAllIssue()}},kt=It,wt=Object(i["a"])(kt,gt,yt,!1,null,null,null),xt=wt.exports;a["default"].use(c["a"]);var _t=new c["a"]({routes:[{path:"/",name:"home",component:v},{path:"/about",name:"about",component:function(){return s.e("about").then(s.bind(null,"f820"))}},{path:"/project",name:"project",component:C},{path:"/login",name:"login",component:G},{path:"/register",name:"Register",component:B},{path:"/accountmanagement",name:"AccountManagement",component:dt},{path:"/issue",name:"IssueIndex",component:Z},{path:"/issue/:id",name:"IssuePage",component:nt},{path:"/profile",name:"Profile",component:vt},{path:"/report",name:"Report",component:xt}]}),Dt=s("2819"),Ct=s.n(Dt),St=s("a7fe"),jt=s.n(St),Pt=s("ecee"),Ot=s("c074"),Mt=s("ad3d"),$t=s("5f5b");s("f9e3"),s("2dd8");Pt["c"].add(Ot["d"],Ot["a"],Ot["b"],Ot["c"]),a["default"].use($t["a"]),a["default"].component("font-awesome-icon",Mt["a"]),a["default"].use(jt.a,w.a),a["default"].use(Ct.a),a["default"].config.productionTip=!1,_t.beforeEach((function(t,e,s){var a=null!=localStorage.getItem("token");a?s():"/login"!==t.path?s("/login"):s()})),new a["default"]({router:_t,render:function(t){return t(u)}}).$mount("#app")},8368:function(t,e,s){"use strict";var a=s("cc79"),r=s.n(a);r.a},"85ec":function(t,e,s){},cc79:function(t,e,s){},d000:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[s("router-link",{attrs:{to:"/"}},[s("b-navbar-brand",[t._v("ITS")])],1),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",{staticClass:"mr-auto"},[t.isShow?s("b-nav-item",{attrs:{href:"#/project"}},[t._v("Project")]):t._e(),s("b-nav-item",{attrs:{href:"#/issue"}},[t._v("Issue")]),t.isShow?s("b-nav-item",{attrs:{href:"#/accountmanagement"}},[t._v("AccountManagement")]):t._e(),s("b-nav-item",{attrs:{href:"#/report"}},[t._v("Report")])],1),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-item",{attrs:{id:"user-name"}},[t._v(t._s(t.userName))]),s("b-button",{attrs:{variant:"transparent"}},[s("font-awesome-icon",{attrs:{icon:"info-circle",size:"lg"}})],1),s("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("font-awesome-icon",{attrs:{icon:"user",size:"lg"}})]},proxy:!0}])},[s("b-dropdown-item",{attrs:{href:"#/profile"}},[t._v("Profile")]),s("b-dropdown-item",{on:{click:t.logout}},[t._v("Sign Out")])],1)],1)],1)],1)],1)},r=[],n=(s("7f7f"),s("96cf"),s("3b8d")),i=s("bc3a"),o=s.n(i),l={name:"NavBar",data:function(){return{userName:"",isShow:!1}},methods:{logout:function(){localStorage.removeItem("token"),localStorage.removeItem("user_id"),this.$router.push("/login")},CheckIdentity:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,s,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=localStorage.getItem("user_id"),s=localStorage.getItem("token"),a="http://lspssapple.asuscomm.com:81/api/user/".concat(e),this,t.next=6,o.a.get(a,{headers:{Authorization:"Bearer ".concat(s),"content-type":"application/json;charset=utf-8"}}).then((function(t){return t})).catch((function(t){return t.response}));case 6:r=t.sent,this.userName=r.data.name,1==r.data.charactorId?this.isShow=!0:this.isShow=!1;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.CheckIdentity()}},u=l,c=(s("8368"),s("2877")),d=Object(c["a"])(u,a,r,!1,null,"7808215e",null);e["a"]=d.exports}});
//# sourceMappingURL=app.5ffb9e62.js.map